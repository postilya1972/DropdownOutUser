{"version":3,"file":"extension.js","sources":["../../../../src/Services/DropdownOutUserController.ts","../../../../src/Controls/DropdownOutUser/DropdownOutUserImpl.tsx","../../../../src/Controls/DropdownOutUser/DropdownOutUser.tsx","../../../../src/Index.ts"],"sourcesContent":["import { GenModels } from \"@docsvision/webclient/Generated/DocsVision.WebClient.Models\";\r\nimport { $RequestManager } from \"@docsvision/webclient/System/$RequestManager\";\r\nimport { serviceName } from \"@docsvision/webclient/System/ServiceUtils\";\r\nimport { urlStore } from \"@docsvision/webclient/System/UrlStore\";\r\n\r\nexport class DropdownOutUserController {\r\n\r\n    constructor(private services: $RequestManager) {\r\n    }\r\n\r\n    /**\r\n      * ��������� ������ ������������� �� ������� �������\r\n      */\r\n    public getUsersInfo(): Promise<GenModels.Element[]> {\r\n        var url = urlStore.urlResolver.resolveUrl(\"GetUsersInfo\", \"DropdownOutUser\");\r\n        return this.services.requestManager.get(url);\r\n    }\r\n\r\n}\r\n\r\nexport type $DropdownOutUserController = { dropdownOutUserController: DropdownOutUserController };\r\nexport const $DropdownOutUserController = serviceName((s: $DropdownOutUserController) => s.dropdownOutUserController);","﻿import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport classNames from \"classnames\";\r\nimport { DropdownOutUser, DropdownOutUserParams } from \"./DropdownOutUser\";\r\nimport { InputBasedControlImpl, InputBasedControlState } from \"@docsvision/webclient/System/InputBasedControlImpl\";\r\nimport { IBindingResult } from \"@docsvision/webclient/System/IBindingResult\";\r\nimport { GenModels } from \"@docsvision/webclient/Generated/DocsVision.WebClient.Models\";\r\nimport { ComboBoxTitle } from \"@docsvision/webclient/Helpers/ComboBox/ComboBoxTitle\";\r\nimport { resources } from \"@docsvision/webclient/System/Resources\";\r\nimport { CancelableEvent } from \"@docsvision/webclient/System/CancelableEvent\";\r\nimport { IEventArgs } from \"@docsvision/webclient/System/IEventArgs\";\r\nimport { SimpleEvent } from \"@docsvision/webclient/System/SimpleEvent\";\r\nimport { EditMode } from \"@docsvision/webclient/System/EditMode\";\r\nimport { Helpers } from \"@docsvision/webclient/Legacy/Utils\";\r\nimport { CancelableEventArgs } from \"@docsvision/webclient/System/CancelableEventArgs\";\r\nimport { classIfNot } from \"@docsvision/webclient/System/CssUtils\";\r\nimport { IValidationParams } from \"@docsvision/webclient/System/IValidationParams\";\r\nimport { IValidationResult } from \"@docsvision/webclient/System/IValidationResult\";\r\nimport { IEditPopoverProps } from \"@docsvision/webclient/Helpers/PopoverHelpers/EditPopover/IEditPopoverProps\";\r\nimport { LabeledText } from \"@docsvision/webclient/Helpers/LabeledText\";\r\nimport { getRequiredLabel } from \"@docsvision/webclient/System/GetRequiredLabel\";\r\nimport { ComboBoxWrapper } from \"@docsvision/webclient/Helpers/ComboBox/ComboBoxWrapper\";\r\nimport { ComboBoxWrapperContent } from \"@docsvision/webclient/Helpers/ComboBox/Helpers/ComboBoxWrapperContent\";\r\nimport { ComboBoxTitleContent } from \"@docsvision/webclient/Helpers/ComboBox/Helpers/ComboBoxTitleContent\";\r\nimport { PopoverComboBoxBodyContent } from \"@docsvision/webclient/Helpers/ComboBox/Helpers/PopoverComboBoxBodyContent\";\r\nimport { ClosePopoverListener } from \"@docsvision/webclient/Helpers/PopoverHelpers/ClosePopoverListener\";\r\nimport { Focusable } from \"@docsvision/webclient/Helpers/FocusManagement/Focusable\";\r\nimport { ComboBoxElement } from \"@docsvision/webclient/Helpers/ComboBox/ComboBoxElement\";\r\nimport { ComboBoxElementContent } from \"@docsvision/webclient/Helpers/ComboBox/Helpers/ComboBoxElementContent\";\r\nimport { PopoverMode } from \"@docsvision/webclient/Helpers/PopoverHelpers/Popover\";\r\n\r\n/** @internal */\r\nexport interface DropdownOutUserState extends DropdownOutUserParams, InputBasedControlState<string> {\r\n    binding: IBindingResult<string>;\r\n    onMouseDownEvent: boolean;\r\n    passedValidation?: boolean;\r\n}\r\n\r\n/** @internal */\r\nexport type DropdownOutUserImplState = DropdownOutUserState;\r\n\r\n/** @internal */\r\nexport class DropdownOutUserImpl extends InputBasedControlImpl<string, DropdownOutUserParams, DropdownOutUserState> {\r\n    /**\r\n     * Корневой узел дропдауна\r\n     */\r\n    protected el: HTMLElement;\r\n    /**\r\n     * Сфокусированный элемент\r\n     */\r\n    protected focusedElement: GenModels.BindingMetadata;\r\n    /**\r\n     * Заголовок комбобокса\r\n     */\r\n    protected comboboxTitle: ComboBoxTitle;\r\n\r\n    /**\r\n     * Предыдущий сфокусированный элемент (глобально)\r\n     */\r\n    protected prevActiveElement: HTMLElement;\r\n    protected prevActiveElementEvent: (event: FocusEvent) => void;\r\n\r\n    static readonly EMPTY_ELEMENT: GenModels.BindingMetadata = { key: null, value: resources.DropDown_NotSelectedValue };\r\n    /**\r\n     * Родительский модальный элемент (ModalDialog), если такой существует\r\n     */\r\n    private parentModal;\r\n\r\n    constructor(props: DropdownOutUserParams, state: DropdownOutUserState) {\r\n        super(props, state);\r\n\r\n        this.onDropdownOutUserContainerClick = this.onDropdownOutUserContainerClick.bind(this);\r\n        this.onElementClick = this.onElementClick.bind(this);\r\n        this.onClearValueClick = this.onClearValueClick.bind(this);\r\n\r\n        this.state.collapsing = CancelableEvent.Create<IEventArgs>(this.state.wrapper);\r\n        this.state.collapsed = SimpleEvent.Create<IEventArgs>(this.state.wrapper);\r\n        this.state.expanding = CancelableEvent.Create<IEventArgs>(this.state.wrapper);\r\n        this.state.expanded = SimpleEvent.Create<IEventArgs>(this.state.wrapper);\r\n        this.state.onMouseDownEvent = false;\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        super.UNSAFE_componentWillMount();\r\n        if (typeof this.state.currentValue === 'undefined' && this.state.editMode === EditMode.Edit) {\r\n            this.setValue(this.getDefaultValue(), false);\r\n        }\r\n\r\n        document.addEventListener('click', this.handleDocumentClick);\r\n        document.addEventListener('focus', this.handleDocumentFocus, true);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let control = this.state.wrapper && ReactDOM.findDOMNode(this.state.wrapper);\r\n        let element = control.parentNode as HTMLElement;\r\n        while (element && !this.parentModal) {\r\n            if (element.classList?.contains(\"modal-dialog-box-helper\")) {\r\n                this.parentModal = element;\r\n            }\r\n            element = element.parentNode as HTMLElement;\r\n        }\r\n        this.parentModal && this.parentModal.addEventListener('click', this.handleDocumentClick);\r\n        try {\r\n            //Запрос списка пользователей из внешней системы\r\n            const users = await this.state.services.dropdownOutUserController.getUsersInfo();\r\n            this.setState({ items: users});\r\n        } catch {\r\n            alert(\"Возникла ошибка при запросе данных о пользователях из внешенй системы\");\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('click', this.handleDocumentClick);\r\n        document.removeEventListener('focus', this.handleDocumentFocus);\r\n        this.parentModal && this.parentModal.removeEventListener('click', this.handleDocumentClick);\r\n\r\n        super.componentWillUnmount();\r\n    }\r\n\r\n    protected handleDocumentClick = (event?: Event) => {\r\n        let target = Helpers.GetTarget(event);\r\n        let domElement = this.componentDOMNode;\r\n        if (domElement && !domElement.contains(target) && !this.state.isCollapsed) {\r\n            this.toggleCollapsed();\r\n        }\r\n    };\r\n\r\n    protected handleDocumentFocus = (event: FocusEvent) => {\r\n        this.prevActiveElement = event.target as HTMLElement;\r\n    };\r\n\r\n    setValue(value: string, redraw: boolean) {\r\n        super.setValue(value, redraw);\r\n\r\n        if (!this.state.isCollapsed) {\r\n            this.collapseDropdownOutUser();\r\n\r\n            if (this.comboboxTitle) {\r\n                const title = ReactDOM.findDOMNode(this.comboboxTitle) as HTMLInputElement;\r\n                if (title && title.focus) {\r\n                    title.focus();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected getTextValue(): string {\r\n        let key = this.getValue();\r\n        return this.getTextValueFor(key);\r\n    }\r\n\r\n    public getTextValueFor(key: string) {\r\n        let element = this.state.items && this.state.items.find(l => l.key == key);\r\n        return !!element && element.value || '';\r\n    }\r\n\r\n    protected onDropdownOutUserContainerClick(e?: any) {\r\n        if (this.editAvailable && (!e || !e.target.classList.contains(\"clear-button-icon\"))) {\r\n            this.toggleCollapsed();\r\n        }\r\n    }\r\n\r\n    protected onElementClick(element: GenModels.BindingMetadata) {\r\n        this.setValue(element.key, true);\r\n    }\r\n\r\n    protected onClearValueClick(e: React.MouseEvent<any>) {\r\n        e.preventDefault();\r\n        this.setValue(null, true);\r\n    }\r\n\r\n    protected onPlaceholderClick(event) {\r\n        this.onDropdownOutUserContainerClick(event);\r\n    }\r\n\r\n    protected toggleCollapsed = (): CancelableEventArgs<IEventArgs> => {\r\n        return this.state.isCollapsed ? this.expandDropdownOutUser() : this.collapseDropdownOutUser();\r\n    };\r\n\r\n    protected expandDropdownOutUser = (): CancelableEventArgs<IEventArgs> => {\r\n        const trigger = CancelableEvent.cast(this.state.expanding).trigger();\r\n        trigger.accepted(() => {\r\n            this.setState({\r\n                isCollapsed: false\r\n            }, () => {\r\n                SimpleEvent.cast(this.state.expanded).trigger();\r\n            });\r\n        });\r\n\r\n        return trigger;\r\n    };\r\n\r\n    protected collapseDropdownOutUser = (): CancelableEventArgs<IEventArgs> => {\r\n        const trigger = CancelableEvent.cast(this.state.collapsing).trigger();\r\n        trigger.accepted(() => {\r\n            this.setState({\r\n                isCollapsed: true\r\n            }, () => {\r\n                SimpleEvent.cast(this.state.collapsed).trigger();\r\n            });\r\n        });\r\n\r\n        return trigger;\r\n    };\r\n\r\n    protected onCloseDropdownOutUserTriggered = () => {\r\n        if (!this.state.isCollapsed) {\r\n            this.collapseDropdownOutUser();\r\n        }\r\n    }\r\n\r\n    protected isNotSameDropdownOutUser = (target: HTMLElement) => {\r\n        return $(target).closest('.dv-control[data-control-name=\"' + this.state.name + '\"]').length === 0;\r\n    };\r\n\r\n    protected getCssClass(): string {\r\n        return super.getCssClass() + classIfNot(this.state.passedValidation, \"validation-input\");\r\n    }\r\n\r\n    protected onInputFocus(event: React.FocusEvent<any>) {\r\n        if (this.isNotSameDropdownOutUser(this.prevActiveElement)) {\r\n            super.onInputFocus(event);\r\n        }\r\n    }\r\n\r\n    protected onMouseDown() {\r\n        this.state.onMouseDownEvent = true;\r\n    }\r\n\r\n    protected onInputBlur(event: React.FocusEvent<any>) {\r\n        setTimeout(() => {\r\n            if (this.isNotSameDropdownOutUser(document.activeElement as HTMLElement)) {\r\n                if (!this.state.onMouseDownEvent) {\r\n                    this.setState({ inputFocused: false });\r\n                    this.validate({ ShowErrorMessage: true } as IValidationParams);\r\n                    super.onInputBlur(event);\r\n                } else {\r\n                    this.state.onMouseDownEvent = false;\r\n                }\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    public validate(params: any): IValidationResult;\r\n    public validate(params: IValidationParams): IValidationResult {\r\n        if (this.state.required) {\r\n            let message = this.state.visibility ? resources.Validation_FieldRequired :\r\n                resources.Error_HiddenParameter?.format(this.state.name);\r\n            let passed = this.hasValue();\r\n            let result = {\r\n                Passed: passed,\r\n                Message: passed ? null : message,\r\n                Visibility: this.state.visibility\r\n            } as IValidationResult;\r\n\r\n            if (!result.Passed && params.ShowErrorMessage) {\r\n                this.setState({\r\n                    validationMessage: result.Message\r\n                });\r\n                this.state.passedValidation = false;\r\n                this.forceUpdate();\r\n            } else if (result.Passed) {\r\n                this.state.passedValidation = true;\r\n                this.forceUpdate();\r\n            }\r\n            return result;\r\n        } else {\r\n            return { Passed: true, Message: \"\" };\r\n\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * При фокусе элемента списка\r\n     * @param event Событие фокуса\r\n     * @param element Текущий элемент\r\n     */\r\n    protected onFocusElement = (event: React.FocusEvent<any>, element: GenModels.BindingMetadata) => {\r\n        this.focusedElement = element;\r\n        if (this.isNotSameDropdownOutUser(this.prevActiveElement)) {\r\n            super.onInputFocus(event);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * При снятии фокуса у элемента списка\r\n     * @param event Событие снятия фокуса\r\n     * @param element Текущий элемент\r\n     */\r\n    protected onBlurElement = (event: React.FocusEvent<any>, element: GenModels.BindingMetadata) => {\r\n        (this.focusedElement && this.focusedElement.key == element.key) && (this.focusedElement = null);\r\n\r\n        setTimeout(() => {\r\n            if (this.isNotSameDropdownOutUser(document.activeElement as HTMLElement)) {\r\n                super.onInputBlur(event);\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    /**\r\n     * При фокусе соседнего элемента в списке\r\n     * @param element Текущий элемент\r\n     * @param mode Какой из соседних элементов должен получить фокус (предыдущий или следующий)\r\n     */\r\n    protected onFocusSiblingElement = (element: GenModels.BindingMetadata, mode: 'prev' | 'next') => {\r\n        let elementPosition = this.state.items.findIndex(el => el.key == element.key);\r\n        if (elementPosition == -1 && !(this.state.isEmptyKeyAllowed && !this.state.required && element.key == null)) {\r\n            return;\r\n        }\r\n\r\n        elementPosition += (mode == 'prev') ? -1 : 1;\r\n\r\n        const siblingElement = (this.state.isEmptyKeyAllowed && !this.state.required && elementPosition == -1) ?\r\n            DropdownOutUserImpl.EMPTY_ELEMENT :\r\n            this.state.items[elementPosition];\r\n\r\n        if (siblingElement && (!this.focusedElement || this.focusedElement.key != siblingElement.key)) {\r\n            this.focusedElement = siblingElement;\r\n            this.forceUpdate();\r\n        }\r\n    }\r\n\r\n    protected showEditPopover(popoverOptions?: IEditPopoverProps): Promise<DropdownOutUser> {\r\n        popoverOptions = popoverOptions || {} as IEditPopoverProps;\r\n        popoverOptions.className = classNames(popoverOptions.className, \"dropdown-edit-popover\");\r\n        return super.showEditPopover(popoverOptions) as any;\r\n    }\r\n\r\n    protected renderWithText() {\r\n        this.updateValidationMessage();\r\n\r\n        return (\r\n            <div>\r\n                <LabeledText label={this.state.labelText} text={this.getTextValue()}\r\n                    alignment={this.state.services.labelWidth && this.state.services.labelWidth.alignment}\r\n                    labelWidth={this.state.services.labelWidth && this.state.services.labelWidth.width}\r\n                    onFocus={this.onInputFocus}\r\n                    onBlur={this.onInputBlur}\r\n                    showEmpty={this.state.showEmptyLabel || this.state.hadValue}\r\n                    onTextClick={this.onValueClick} attachText={this.attachText}\r\n                    wrapLongTextUnderLabel={this.state.wrapLongValueUnderLabel}\r\n                    clickableText={this.canShowEditDialog()}\r\n                    title={this.state.tip} valueTitle={this.getValueTitle()} tabIndex={this.getTabIndex()} />\r\n                {this.state.validationMessage ? this.renderValidationMessage() : \"\"}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    protected renderInto(props: DropdownOutUserParams, container: HTMLElement): void {\r\n        ReactDOM.render(<DropdownOutUser {...props} key={props.name} />, container);\r\n    }\r\n\r\n    protected renderInput(): React.ReactNode {\r\n        let currentPlaceHolder = this.state.placeHolder;\r\n        if (this.state.required) {\r\n            currentPlaceHolder = (this.state.placeHolder ? getRequiredLabel(this.state.placeHolder) : \"*\");\r\n        }\r\n        const placeholderTitle = (!this.state.inputFocused && this.state.isCollapsed && currentPlaceHolder);\r\n        let title = (this.getValue() == null || this.getValue() == '') ?\r\n            (placeholderTitle || DropdownOutUserImpl.EMPTY_ELEMENT.value) :\r\n            (this.getTextValue());\r\n\r\n        return (\r\n            <div ref={el => this.el = el}>\r\n                {<div className=\"combobox-label text-trim\">\r\n                    {this.state.required ? (getRequiredLabel(this.state.labelText || \"\")) : this.state.labelText || \"\"}\r\n                </div>}\r\n                <ComboBoxWrapper disabled={!this.editAvailable}>\r\n                    <ComboBoxWrapperContent title={\r\n                        <ComboBoxTitle ref={ref => this.comboboxTitle = ref} disabled={!this.editAvailable}\r\n                            className='dropdown-combobox-title-helper'\r\n                            onFocus={this.onInputFocus}\r\n                            onBlur={this.onInputBlur}\r\n                            expanded={!this.state.isCollapsed}\r\n                            tabIndex={this.getTabIndex() == 0}\r\n                            onClick={this.onDropdownOutUserContainerClick}>\r\n                            <ComboBoxTitleContent>{title}</ComboBoxTitleContent>\r\n                        </ComboBoxTitle>} body={\r\n\r\n                            <PopoverComboBoxBodyContent mode={PopoverMode.BottomDropdown} isOpen={!this.state.isCollapsed}\r\n                                className={classNames(\"combobox-helper\", this.props.name)}>\r\n                                <div data-control-name={this.state.name}>\r\n                                    <ClosePopoverListener onClose={this.onCloseDropdownOutUserTriggered} boundaryTarget={this.el}>\r\n                                        <Focusable selectorToFocus='.combobox-element-helper-selected' selectorToReturnFocus={null}>\r\n                                            {this.state.isEmptyKeyAllowed && !this.state.required && <ComboBoxElement tabIndex={true}\r\n                                                selected={!this.hasValue()}\r\n                                                focused={this.focusedElement && this.focusedElement.key == null}\r\n                                                onSelect={() => this.setValue(null, true)}\r\n                                                onFocus={event => this.onFocusElement(event, DropdownOutUserImpl.EMPTY_ELEMENT)}\r\n                                                onBlur={event => this.onBlurElement(event, DropdownOutUserImpl.EMPTY_ELEMENT)}\r\n                                                onFocusNext={() => this.onFocusSiblingElement(DropdownOutUserImpl.EMPTY_ELEMENT, 'next')}\r\n                                                onFocusPrev={() => this.onFocusSiblingElement(DropdownOutUserImpl.EMPTY_ELEMENT, 'prev')}>\r\n                                                <ComboBoxElementContent>{DropdownOutUserImpl.EMPTY_ELEMENT.value}</ComboBoxElementContent>\r\n                                            </ComboBoxElement>}\r\n                                            <div className=\"dropdown-variants-list\">\r\n                                                {this.state.items.map((element: GenModels.Element) => {\r\n                                                    return <ComboBoxElement key={element.key}\r\n                                                        id={element.key}\r\n                                                        tabIndex={true}\r\n                                                        selected={element.key == this.getValue()}\r\n                                                        focused={this.focusedElement && this.focusedElement.key == element.key}\r\n                                                        onMouseDown={() => this.onMouseDown()}\r\n                                                        onSelect={() => this.onElementClick(element)}\r\n                                                        onFocus={event => this.onFocusElement(event, element)}\r\n                                                        onBlur={event => this.onBlurElement(event, element)}\r\n                                                        onFocusNext={() => this.onFocusSiblingElement(element, 'next')}\r\n                                                        onFocusPrev={() => this.onFocusSiblingElement(element, 'prev')}>\r\n                                                        <ComboBoxElementContent>\r\n                                                            {this.state.elementContentRenderFunc\r\n                                                                ? this.state.elementContentRenderFunc(element)\r\n                                                                : element.value}\r\n                                                        </ComboBoxElementContent>\r\n                                                    </ComboBoxElement>;\r\n                                                })}\r\n                                            </div>\r\n                                        </Focusable>\r\n                                    </ClosePopoverListener>\r\n                                </div>\r\n                            </PopoverComboBoxBodyContent>} />\r\n                </ComboBoxWrapper>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    protected renderPlaceholder() {\r\n        return null;\r\n    }\r\n}\r\n","﻿import { app } from \"@docsvision/webclient/App\";\r\nimport { GenModels } from \"@docsvision/webclient/Generated/DocsVision.WebClient.Models\";\r\nimport { $LabelWidth } from \"@docsvision/webclient/System/$LabelWidth\";\r\nimport { BasicApiEvent, CancelableApiEvent } from \"@docsvision/webclient/System/ApiEvent\";\r\nimport { setNewValueDisplayName, setSavedValueDisplayName } from \"@docsvision/webclient/System/BindingMetadataConstants\";\r\nimport { apiEvent } from \"@docsvision/webclient/System/Event\";\r\nimport { getBindingResult } from \"@docsvision/webclient/System/GetBindingResult\";\r\nimport { at, handler } from \"@docsvision/webclient/System/Handler\";\r\nimport { IBindingResult } from \"@docsvision/webclient/System/IBindingResult\";\r\nimport { IEventArgs } from \"@docsvision/webclient/System/IEventArgs\";\r\nimport { InputBasedControl, InputBasedControlParams } from \"@docsvision/webclient/System/InputBasedControl\";\r\nimport { $EditOperationStore, $LayoutInfo } from \"@docsvision/webclient/System/LayoutServices\";\r\nimport { editOperationAvailable } from \"@docsvision/webclient/System/OperationUtils\";\r\nimport { r } from \"@docsvision/webclient/System/Readonly\";\r\nimport { rw } from \"@docsvision/webclient/System/Readwrite\";\r\nimport { Optional } from \"@docsvision/webclient/System/ServiceContainer\";\r\nimport { $DropdownOutUserController } from \"../../Services/DropdownOutUserController\";\r\nimport { DropdownOutUserImpl, DropdownOutUserState } from \"./DropdownOutUserImpl\";\r\n\r\n/**\r\n * Содержит публичные свойства элемента управления [Раскрывающийся список]{@link DropdownOutUser}.\r\n */\r\nexport class DropdownOutUserParams extends InputBasedControlParams<string> {\r\n    /** Стандартный CSS класс со стилями элемента управления */\r\n    @r standardCssClass?: string = \"system-dropdown\";\r\n\r\n    /** Список элементов, доступных для выбора */\r\n    @rw items: GenModels.Element[] = [];\r\n\r\n    /** Флаг развернутости Раскрывающегося списка */\r\n    @rw isCollapsed?: boolean = true;\r\n\r\n    /** Доступно ли нулевое значение для выбора. Как правило значение сооветствует настройкам привязанного поля карточки в метаданных. */\r\n    @rw isEmptyKeyAllowed?: boolean = false;\r\n\r\n    /** Событие возникает при сворачивании Раскрывающегося списка. */\r\n    @apiEvent collapsing?: CancelableApiEvent<IEventArgs>;\r\n    /** Событие возникает после сворачивания Раскрывающегося списка. */\r\n    @apiEvent collapsed?: BasicApiEvent<IEventArgs>;\r\n    /** Событие возникает при разворачивании Раскрывающегося списка. */\r\n    @apiEvent expanding?: CancelableApiEvent<IEventArgs>;\r\n    /** Событие возникает после разворачивания Раскрывающегося списка. */\r\n    @apiEvent expanded?: BasicApiEvent<IEventArgs>;\r\n\r\n    @rw elementContentRenderFunc?: (element: GenModels.Element) => JSX.Element;\r\n\r\n    @rw services?: $EditOperationStore & $LayoutInfo & Optional<$LabelWidth> & $DropdownOutUserController = app;\r\n}\r\n\r\n/**\r\n * Класс элемента управления Раскрывающийся список.\r\n */\r\nexport class DropdownOutUser extends InputBasedControl<string, DropdownOutUserParams, DropdownOutUserState> {\r\n    protected createParams() {\r\n        return new DropdownOutUserParams();\r\n    }\r\n\r\n    static ControlTypeName = \"DropdownOutUser\";\r\n\r\n    /** Возвращает численное значение выбранного элемента. */\r\n    public get valueCode() {\r\n        return this.state.items.find(x => x.key == this.value)?.valueCode;\r\n    }\r\n    public set valueCode(code: number) {\r\n        this.value = this.state.items.find(x => x.valueCode == code)?.key;\r\n    }\r\n\r\n    protected getServices() {\r\n        return this.state.services;\r\n    }\r\n\r\n    @handler(\"elements\")\r\n    private set setElements(val: IBindingResult<GenModels.ElementsDataModel> | GenModels.Element[]) {\r\n        let binding = val as IBindingResult<GenModels.ElementsDataModel>;\r\n        if (binding && binding.value) {\r\n            this.state.items = binding.value.elements;\r\n            this.state.isEmptyKeyAllowed = binding && binding.value && binding.value.isEmptyKeyAllowed;\r\n        } else {\r\n            this.state.items = binding as any;\r\n        }\r\n    }\r\n\r\n    @handler(\"elements\")\r\n    private get getElements(): GenModels.Element[] {\r\n        return this.state.items;\r\n    }\r\n\r\n    @handler(\"binding\")\r\n    private set setBinding(binding: IBindingResult<string>) {\r\n        if (binding) {\r\n            this.value = binding && binding.value;\r\n        }\r\n        this.state.canEdit = editOperationAvailable(this.state.services, binding);\r\n        this.state.binding = binding;\r\n        setSavedValueDisplayName(this.state.binding, this.getImpl<DropdownOutUserImpl>().getTextValueFor(binding.value));\r\n    }\r\n\r\n    @handler(\"defaultElement\")\r\n    private set setDefault(elementKey: string) {\r\n        this.state.default = elementKey;\r\n        if (!this.value && this.state.default) {\r\n            this.value = this.state.default;\r\n        }\r\n    }\r\n\r\n    protected getBindings(): IBindingResult<any>[] {\r\n        setNewValueDisplayName(this.state.binding, this.getImpl<DropdownOutUserImpl>().getTextValueFor(this.value));\r\n        return [getBindingResult(this.state.binding, this.params.value && this.params.value.toString() || null, () => at(DropdownOutUserParams).labelText)];\r\n    }\r\n\r\n    protected getDefault(): string {\r\n        return this.state.default;\r\n    }\r\n\r\n    async onSaved() {\r\n        setSavedValueDisplayName(this.state.binding, this.getImpl<DropdownOutUserImpl>().getTextValueFor(this.value));\r\n    }\r\n\r\n    /** @internal */\r\n    protected createImpl() {\r\n        return new DropdownOutUserImpl(this.props, this.state);\r\n    }\r\n}\r\n","﻿import { extensionManager } from \"@docsvision/webclient/System/ExtensionManager\";\r\nimport { IExtension } from \"@docsvision/webclient/System/IExtension\";\r\nimport { IControlDescription } from \"@docsvision/webclient/System/IControlDescription\";\r\nimport { Service } from \"@docsvision/webclient/System/Service\";\r\nimport { $RequestManager } from \"@docsvision/webclient/System/$RequestManager\";\r\nimport { $DropdownOutUserController, DropdownOutUserController } from \"./Services/DropdownOutUserController\";\r\nimport { DropdownOutUser } from \"./Controls/DropdownOutUser/DropdownOutUser\";\r\n\r\n/**\r\n * Главная входная точка всего расширения\r\n * Данный файл должен импортировать прямо или косвенно все остальные файлы,\r\n * чтобы rollup смог собрать их все в один бандл.\r\n */\r\nextensionManager.registerExtension({\r\n    name: \"DropdownOutUser front extension\",\r\n    version: \"5.5.16.1\",\r\n\r\n\t //Сервис-контроллер для запроса данных о пользователях из внешней системы\r\n    layoutServices: [\r\n        Service.fromFactory($DropdownOutUserController, (services: $RequestManager) => new DropdownOutUserController(services))\r\n    ],\r\n\t\r\n    controls: [\r\n        { controlTypeName: \"DropdownOutUser\", constructor: DropdownOutUser } as any,\r\n    ] as IControlDescription[] ,\r\n\r\n} as IExtension);\r\n"],"names":["urlStore","serviceName","__extends","Helpers","CancelableEvent","SimpleEvent","EditMode","ReactDOM","classIfNot","resources","classNames","React","LabeledText","getRequiredLabel","ComboBoxWrapper","ComboBoxWrapperContent","ComboBoxTitle","ComboBoxTitleContent","PopoverComboBoxBodyContent","PopoverMode","ClosePopoverListener","Focusable","ComboBoxElement","ComboBoxElementContent","InputBasedControlImpl","app","__decorate","r","rw","apiEvent","InputBasedControlParams","editOperationAvailable","setSavedValueDisplayName","setNewValueDisplayName","getBindingResult","at","handler","InputBasedControl","extensionManager","Service"],"mappings":";;;;;;;;IAKA,IAAA,yBAAA,kBAAA,YAAA;IAEI,IAAA,SAAA,yBAAA,CAAoB,QAAyB,EAAA;YAAzB,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAiB;SAC5C;IAED;;IAEI;IACG,IAAA,yBAAA,CAAA,SAAA,CAAA,YAAY,GAAnB,YAAA;IACI,QAAA,IAAI,GAAG,GAAGA,iBAAQ,CAAC,WAAW,CAAC,UAAU,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;YAC7E,OAAO,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAChD,CAAA;QAEL,OAAC,yBAAA,CAAA;IAAD,CAAC,EAAA,CAAA,CAAA;IAGM,IAAM,0BAA0B,GAAGC,wBAAW,CAAC,UAAC,CAA6B,EAAK,EAAA,OAAA,CAAC,CAAC,yBAAyB,CAA3B,EAA2B,CAAC;;ICoBrH;IACA,IAAA,mBAAA,kBAAA,UAAA,MAAA,EAAA;QAAyCC,eAA0E,CAAA,mBAAA,EAAA,MAAA,CAAA,CAAA;QA0B/G,SAAY,mBAAA,CAAA,KAA4B,EAAE,KAA2B,EAAA;IAArE,QAAA,IAAA,KAAA,GACI,MAAM,CAAA,IAAA,CAAA,IAAA,EAAA,KAAK,EAAE,KAAK,CAAC,IAWtB,IAAA,CAAA;YAuCS,KAAmB,CAAA,mBAAA,GAAG,UAAC,KAAa,EAAA;gBAC1C,IAAI,MAAM,GAAGC,aAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IACtC,YAAA,IAAI,UAAU,GAAG,KAAI,CAAC,gBAAgB,CAAC;IACvC,YAAA,IAAI,UAAU,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE;oBACvE,KAAI,CAAC,eAAe,EAAE,CAAC;IAC1B,aAAA;IACL,SAAC,CAAC;YAEQ,KAAmB,CAAA,mBAAA,GAAG,UAAC,KAAiB,EAAA;IAC9C,YAAA,KAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC,MAAqB,CAAC;IACzD,SAAC,CAAC;IA8CQ,QAAA,KAAA,CAAA,eAAe,GAAG,YAAA;IACxB,YAAA,OAAO,KAAI,CAAC,KAAK,CAAC,WAAW,GAAG,KAAI,CAAC,qBAAqB,EAAE,GAAG,KAAI,CAAC,uBAAuB,EAAE,CAAC;IAClG,SAAC,CAAC;IAEQ,QAAA,KAAA,CAAA,qBAAqB,GAAG,YAAA;IAC9B,YAAA,IAAM,OAAO,GAAGC,+BAAe,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,OAAO,EAAE,CAAC;gBACrE,OAAO,CAAC,QAAQ,CAAC,YAAA;oBACb,KAAI,CAAC,QAAQ,CAAC;IACV,oBAAA,WAAW,EAAE,KAAK;qBACrB,EAAE,YAAA;IACC,oBAAAC,uBAAW,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,CAAC;IACpD,iBAAC,CAAC,CAAC;IACP,aAAC,CAAC,CAAC;IAEH,YAAA,OAAO,OAAO,CAAC;IACnB,SAAC,CAAC;IAEQ,QAAA,KAAA,CAAA,uBAAuB,GAAG,YAAA;IAChC,YAAA,IAAM,OAAO,GAAGD,+BAAe,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,OAAO,EAAE,CAAC;gBACtE,OAAO,CAAC,QAAQ,CAAC,YAAA;oBACb,KAAI,CAAC,QAAQ,CAAC;IACV,oBAAA,WAAW,EAAE,IAAI;qBACpB,EAAE,YAAA;IACC,oBAAAC,uBAAW,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,OAAO,EAAE,CAAC;IACrD,iBAAC,CAAC,CAAC;IACP,aAAC,CAAC,CAAC;IAEH,YAAA,OAAO,OAAO,CAAC;IACnB,SAAC,CAAC;IAEQ,QAAA,KAAA,CAAA,+BAA+B,GAAG,YAAA;IACxC,YAAA,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE;oBACzB,KAAI,CAAC,uBAAuB,EAAE,CAAC;IAClC,aAAA;IACL,SAAC,CAAA;YAES,KAAwB,CAAA,wBAAA,GAAG,UAAC,MAAmB,EAAA;gBACrD,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,iCAAiC,GAAG,KAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;IACtG,SAAC,CAAC;IA4DF;;;;IAIG;IACO,QAAA,KAAA,CAAA,cAAc,GAAG,UAAC,KAA4B,EAAE,OAAkC,EAAA;IACxF,YAAA,KAAI,CAAC,cAAc,GAAG,OAAO,CAAC;gBAC9B,IAAI,KAAI,CAAC,wBAAwB,CAAC,KAAI,CAAC,iBAAiB,CAAC,EAAE;IACvD,gBAAA,MAAA,CAAA,SAAA,CAAM,YAAY,CAAA,IAAA,CAAA,KAAA,EAAC,KAAK,CAAC,CAAC;IAC7B,aAAA;IACL,SAAC,CAAA;IAED;;;;IAIG;IACO,QAAA,KAAA,CAAA,aAAa,GAAG,UAAC,KAA4B,EAAE,OAAkC,EAAA;gBACvF,CAAC,KAAI,CAAC,cAAc,IAAI,KAAI,CAAC,cAAc,CAAC,GAAG,IAAI,OAAO,CAAC,GAAG,MAAM,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC,CAAC;IAEhG,YAAA,UAAU,CAAC,YAAA;oBACP,IAAI,KAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,aAA4B,CAAC,EAAE;IACtE,oBAAA,MAAA,CAAA,SAAA,CAAM,WAAW,CAAA,IAAA,CAAA,KAAA,EAAC,KAAK,CAAC,CAAC;IAC5B,iBAAA;iBACJ,EAAE,CAAC,CAAC,CAAC;IACV,SAAC,CAAA;IAED;;;;IAIG;IACO,QAAA,KAAA,CAAA,qBAAqB,GAAG,UAAC,OAAkC,EAAE,IAAqB,EAAA;gBACxF,IAAI,eAAe,GAAG,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,UAAA,EAAE,IAAI,OAAA,EAAE,CAAC,GAAG,IAAI,OAAO,CAAC,GAAG,CAAA,EAAA,CAAC,CAAC;gBAC9E,IAAI,eAAe,IAAI,CAAC,CAAC,IAAI,EAAE,KAAI,CAAC,KAAK,CAAC,iBAAiB,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,OAAO,CAAC,GAAG,IAAI,IAAI,CAAC,EAAE;oBACzG,OAAO;IACV,aAAA;IAED,YAAA,eAAe,IAAI,CAAC,IAAI,IAAI,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;gBAE7C,IAAM,cAAc,GAAG,CAAC,KAAI,CAAC,KAAK,CAAC,iBAAiB,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,eAAe,IAAI,CAAC,CAAC;oBACjG,mBAAmB,CAAC,aAAa;IACjC,gBAAA,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;IAEtC,YAAA,IAAI,cAAc,KAAK,CAAC,KAAI,CAAC,cAAc,IAAI,KAAI,CAAC,cAAc,CAAC,GAAG,IAAI,cAAc,CAAC,GAAG,CAAC,EAAE;IAC3F,gBAAA,KAAI,CAAC,cAAc,GAAG,cAAc,CAAC;oBACrC,KAAI,CAAC,WAAW,EAAE,CAAC;IACtB,aAAA;IACL,SAAC,CAAA;YA1PG,KAAI,CAAC,+BAA+B,GAAG,KAAI,CAAC,+BAA+B,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACvF,KAAI,CAAC,cAAc,GAAG,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACrD,KAAI,CAAC,iBAAiB,GAAG,KAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;IAE3D,QAAA,KAAI,CAAC,KAAK,CAAC,UAAU,GAAGD,+BAAe,CAAC,MAAM,CAAa,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IAC/E,QAAA,KAAI,CAAC,KAAK,CAAC,SAAS,GAAGC,uBAAW,CAAC,MAAM,CAAa,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IAC1E,QAAA,KAAI,CAAC,KAAK,CAAC,SAAS,GAAGD,+BAAe,CAAC,MAAM,CAAa,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IAC9E,QAAA,KAAI,CAAC,KAAK,CAAC,QAAQ,GAAGC,uBAAW,CAAC,MAAM,CAAa,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IACzE,QAAA,KAAI,CAAC,KAAK,CAAC,gBAAgB,GAAG,KAAK,CAAC;;SACvC;IAED,IAAA,mBAAA,CAAA,SAAA,CAAA,yBAAyB,GAAzB,YAAA;YACI,MAAM,CAAA,SAAA,CAAA,yBAAyB,WAAE,CAAC;IAClC,QAAA,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,KAAK,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,KAAKC,iBAAQ,CAAC,IAAI,EAAE;gBACzF,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,KAAK,CAAC,CAAC;IAChD,SAAA;YAED,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;YAC7D,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;SACtE,CAAA;IAEK,IAAA,mBAAA,CAAA,SAAA,CAAA,iBAAiB,GAAvB,YAAA;;;;;;;IACQ,wBAAA,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,IAAIC,4BAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IACzE,wBAAA,OAAO,GAAG,OAAO,CAAC,UAAyB,CAAC;IAChD,wBAAA,OAAO,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;IACjC,4BAAA,IAAA,CAAA,EAAA,GAAI,OAAO,CAAC,SAAS,0CAAE,QAAQ,CAAC,yBAAyB,CAAG,EAAA;IACxD,gCAAA,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC;IAC9B,6BAAA;IACD,4BAAA,OAAO,GAAG,OAAO,CAAC,UAAyB,CAAC;IAC/C,yBAAA;IACD,wBAAA,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;;;;4BAGvE,OAAM,CAAA,CAAA,YAAA,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,yBAAyB,CAAC,YAAY,EAAE,CAAA,CAAA;;IAA1E,wBAAA,KAAK,GAAG,EAAkE,CAAA,IAAA,EAAA,CAAA;4BAChF,IAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC;;;;4BAE/B,KAAK,CAAC,uEAAuE,CAAC,CAAC;;;;;;IAEtF,KAAA,CAAA;IAED,IAAA,mBAAA,CAAA,SAAA,CAAA,oBAAoB,GAApB,YAAA;YACI,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;YAChE,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;IAChE,QAAA,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;YAE5F,MAAM,CAAA,SAAA,CAAA,oBAAoB,WAAE,CAAC;SAChC,CAAA;IAcD,IAAA,mBAAA,CAAA,SAAA,CAAA,QAAQ,GAAR,UAAS,KAAa,EAAE,MAAe,EAAA;IACnC,QAAA,MAAA,CAAA,SAAA,CAAM,QAAQ,CAAC,IAAA,CAAA,IAAA,EAAA,KAAK,EAAE,MAAM,CAAC,CAAC;IAE9B,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;gBACzB,IAAI,CAAC,uBAAuB,EAAE,CAAC;gBAE/B,IAAI,IAAI,CAAC,aAAa,EAAE;oBACpB,IAAM,KAAK,GAAGA,4BAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAqB,CAAC;IAC3E,gBAAA,IAAI,KAAK,IAAI,KAAK,CAAC,KAAK,EAAE;wBACtB,KAAK,CAAC,KAAK,EAAE,CAAC;IACjB,iBAAA;IACJ,aAAA;IACJ,SAAA;SACJ,CAAA;IAES,IAAA,mBAAA,CAAA,SAAA,CAAA,YAAY,GAAtB,YAAA;IACI,QAAA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;IAC1B,QAAA,OAAO,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;SACpC,CAAA;QAEM,mBAAe,CAAA,SAAA,CAAA,eAAA,GAAtB,UAAuB,GAAW,EAAA;IAC9B,QAAA,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,UAAA,CAAC,EAAI,EAAA,OAAA,CAAC,CAAC,GAAG,IAAI,GAAG,CAAA,EAAA,CAAC,CAAC;YAC3E,OAAO,CAAC,CAAC,OAAO,IAAI,OAAO,CAAC,KAAK,IAAI,EAAE,CAAC;SAC3C,CAAA;QAES,mBAA+B,CAAA,SAAA,CAAA,+BAAA,GAAzC,UAA0C,CAAO,EAAA;YAC7C,IAAI,IAAI,CAAC,aAAa,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,EAAE;gBACjF,IAAI,CAAC,eAAe,EAAE,CAAC;IAC1B,SAAA;SACJ,CAAA;QAES,mBAAc,CAAA,SAAA,CAAA,cAAA,GAAxB,UAAyB,OAAkC,EAAA;YACvD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;SACpC,CAAA;QAES,mBAAiB,CAAA,SAAA,CAAA,iBAAA,GAA3B,UAA4B,CAAwB,EAAA;YAChD,CAAC,CAAC,cAAc,EAAE,CAAC;IACnB,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC7B,CAAA;QAES,mBAAkB,CAAA,SAAA,CAAA,kBAAA,GAA5B,UAA6B,KAAK,EAAA;IAC9B,QAAA,IAAI,CAAC,+BAA+B,CAAC,KAAK,CAAC,CAAC;SAC/C,CAAA;IA0CS,IAAA,mBAAA,CAAA,SAAA,CAAA,WAAW,GAArB,YAAA;IACI,QAAA,OAAO,MAAM,CAAA,SAAA,CAAA,WAAW,CAAE,IAAA,CAAA,IAAA,CAAA,GAAGC,mBAAU,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,kBAAkB,CAAC,CAAC;SAC5F,CAAA;QAES,mBAAY,CAAA,SAAA,CAAA,YAAA,GAAtB,UAAuB,KAA4B,EAAA;YAC/C,IAAI,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE;IACvD,YAAA,MAAA,CAAA,SAAA,CAAM,YAAY,CAAA,IAAA,CAAA,IAAA,EAAC,KAAK,CAAC,CAAC;IAC7B,SAAA;SACJ,CAAA;IAES,IAAA,mBAAA,CAAA,SAAA,CAAA,WAAW,GAArB,YAAA;IACI,QAAA,IAAI,CAAC,KAAK,CAAC,gBAAgB,GAAG,IAAI,CAAC;SACtC,CAAA;QAES,mBAAW,CAAA,SAAA,CAAA,WAAA,GAArB,UAAsB,KAA4B,EAAA;YAAlD,IAYC,KAAA,GAAA,IAAA,CAAA;IAXG,QAAA,UAAU,CAAC,YAAA;gBACP,IAAI,KAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,aAA4B,CAAC,EAAE;IACtE,gBAAA,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;wBAC9B,KAAI,CAAC,QAAQ,CAAC,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,CAAC;wBACvC,KAAI,CAAC,QAAQ,CAAC,EAAE,gBAAgB,EAAE,IAAI,EAAuB,CAAC,CAAC;IAC/D,oBAAA,MAAA,CAAA,SAAA,CAAM,WAAW,CAAA,IAAA,CAAA,KAAA,EAAC,KAAK,CAAC,CAAC;IAC5B,iBAAA;IAAM,qBAAA;IACH,oBAAA,KAAI,CAAC,KAAK,CAAC,gBAAgB,GAAG,KAAK,CAAC;IACvC,iBAAA;IACJ,aAAA;aACJ,EAAE,CAAC,CAAC,CAAC;SACT,CAAA;QAGM,mBAAQ,CAAA,SAAA,CAAA,QAAA,GAAf,UAAgB,MAAyB,EAAA;;IACrC,QAAA,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;IACrB,YAAA,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,GAAGC,mBAAS,CAAC,wBAAwB,GAAE,CAAA,EAAA,GACtEA,mBAAS,CAAC,qBAAqB,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IAC7D,YAAA,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;IAC7B,YAAA,IAAI,MAAM,GAAG;IACT,gBAAA,MAAM,EAAE,MAAM;oBACd,OAAO,EAAE,MAAM,GAAG,IAAI,GAAG,OAAO;IAChC,gBAAA,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU;iBACf,CAAC;gBAEvB,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,gBAAgB,EAAE;oBAC3C,IAAI,CAAC,QAAQ,CAAC;wBACV,iBAAiB,EAAE,MAAM,CAAC,OAAO;IACpC,iBAAA,CAAC,CAAC;IACH,gBAAA,IAAI,CAAC,KAAK,CAAC,gBAAgB,GAAG,KAAK,CAAC;oBACpC,IAAI,CAAC,WAAW,EAAE,CAAC;IACtB,aAAA;qBAAM,IAAI,MAAM,CAAC,MAAM,EAAE;IACtB,gBAAA,IAAI,CAAC,KAAK,CAAC,gBAAgB,GAAG,IAAI,CAAC;oBACnC,IAAI,CAAC,WAAW,EAAE,CAAC;IACtB,aAAA;IACD,YAAA,OAAO,MAAM,CAAC;IACjB,SAAA;IAAM,aAAA;gBACH,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;IAExC,SAAA;SACJ,CAAA;QAqDS,mBAAe,CAAA,SAAA,CAAA,eAAA,GAAzB,UAA0B,cAAkC,EAAA;IACxD,QAAA,cAAc,GAAG,cAAc,IAAI,EAAuB,CAAC;YAC3D,cAAc,CAAC,SAAS,GAAGC,8BAAU,CAAC,cAAc,CAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC;IACzF,QAAA,OAAO,MAAM,CAAA,SAAA,CAAA,eAAe,CAAC,IAAA,CAAA,IAAA,EAAA,cAAc,CAAQ,CAAC;SACvD,CAAA;IAES,IAAA,mBAAA,CAAA,SAAA,CAAA,cAAc,GAAxB,YAAA;YACI,IAAI,CAAC,uBAAuB,EAAE,CAAC;IAE/B,QAAA,QACIC,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,IAAA;IACI,YAAAA,yBAAA,CAAA,aAAA,CAACC,uBAAW,EAAA,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,EAC/D,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,SAAS,EACrF,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,EAClF,OAAO,EAAE,IAAI,CAAC,YAAY,EAC1B,MAAM,EAAE,IAAI,CAAC,WAAW,EACxB,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAC3D,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAC3D,sBAAsB,EAAE,IAAI,CAAC,KAAK,CAAC,uBAAuB,EAC1D,aAAa,EAAE,IAAI,CAAC,iBAAiB,EAAE,EACvC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,UAAU,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,WAAW,EAAE,EAAI,CAAA;IAC5F,YAAA,IAAI,CAAC,KAAK,CAAC,iBAAiB,GAAG,IAAI,CAAC,uBAAuB,EAAE,GAAG,EAAE,CACjE,EACR;SACL,CAAA;IAES,IAAA,mBAAA,CAAA,SAAA,CAAA,UAAU,GAApB,UAAqB,KAA4B,EAAE,SAAsB,EAAA;IACrE,QAAAL,4BAAQ,CAAC,MAAM,CAACI,yBAAC,CAAA,aAAA,CAAA,eAAe,qBAAK,KAAK,EAAA,EAAE,GAAG,EAAE,KAAK,CAAC,IAAI,IAAI,EAAE,SAAS,CAAC,CAAC;SAC/E,CAAA;IAES,IAAA,mBAAA,CAAA,SAAA,CAAA,WAAW,GAArB,YAAA;YAAA,IAsEC,KAAA,GAAA,IAAA,CAAA;IArEG,QAAA,IAAI,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;IAChD,QAAA,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACrB,kBAAkB,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,GAAGE,iCAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,GAAG,CAAC,CAAC;IAClG,SAAA;IACD,QAAA,IAAM,gBAAgB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,kBAAkB,CAAC,CAAC;IACpG,QAAA,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE;iBACxD,gBAAgB,IAAI,mBAAmB,CAAC,aAAa,CAAC,KAAK;IAC5D,aAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;IAE1B,QAAA,QACIF,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAK,GAAG,EAAE,UAAA,EAAE,EAAA,EAAI,OAAA,KAAI,CAAC,EAAE,GAAG,EAAE,GAAA,EAAA;IACvB,YAAAA,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAC,0BAA0B,EAAA,EACrC,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAIE,iCAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,EAAE,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,EAAE,CAChG;IACN,YAAAF,yBAAA,CAAA,aAAA,CAACG,+BAAe,EAAC,EAAA,QAAQ,EAAE,CAAC,IAAI,CAAC,aAAa,EAAA;IAC1C,gBAAAH,yBAAA,CAAA,aAAA,CAACI,6CAAsB,EAAA,EAAC,KAAK,EACzBJ,yBAAC,CAAA,aAAA,CAAAK,2BAAa,EAAC,EAAA,GAAG,EAAE,UAAA,GAAG,EAAA,EAAI,OAAA,KAAI,CAAC,aAAa,GAAG,GAAG,CAAA,EAAA,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,aAAa,EAC9E,SAAS,EAAC,gCAAgC,EAC1C,OAAO,EAAE,IAAI,CAAC,YAAY,EAC1B,MAAM,EAAE,IAAI,CAAC,WAAW,EACxB,QAAQ,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EACjC,QAAQ,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,EACjC,OAAO,EAAE,IAAI,CAAC,+BAA+B,EAAA;IAC7C,wBAAAL,yBAAA,CAAA,aAAA,CAACM,yCAAoB,EAAE,IAAA,EAAA,KAAK,CAAwB,CACxC,EAAE,IAAI,EAElBN,yBAAC,CAAA,aAAA,CAAAO,qDAA0B,IAAC,IAAI,EAAEC,mBAAW,CAAC,cAAc,EAAE,MAAM,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EACzF,SAAS,EAAET,8BAAU,CAAC,iBAAiB,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAA;IACzD,wBAAAC,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAA,mBAAA,EAAwB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAA;IACnC,4BAAAA,yBAAA,CAAA,aAAA,CAACS,yCAAoB,EAAA,EAAC,OAAO,EAAE,IAAI,CAAC,+BAA+B,EAAE,cAAc,EAAE,IAAI,CAAC,EAAE,EAAA;oCACxFT,yBAAC,CAAA,aAAA,CAAAU,mBAAS,IAAC,eAAe,EAAC,mCAAmC,EAAC,qBAAqB,EAAE,IAAI,EAAA;IACrF,oCAAA,IAAI,CAAC,KAAK,CAAC,iBAAiB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAIV,yBAAC,CAAA,aAAA,CAAAW,+BAAe,EAAC,EAAA,QAAQ,EAAE,IAAI,EACpF,QAAQ,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,EAC1B,OAAO,EAAE,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,IAAI,IAAI,EAC/D,QAAQ,EAAE,YAAA,EAAM,OAAA,KAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA,EAAA,EACzC,OAAO,EAAE,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,cAAc,CAAC,KAAK,EAAE,mBAAmB,CAAC,aAAa,CAAC,CAAA,EAAA,EAC/E,MAAM,EAAE,UAAA,KAAK,EAAI,EAAA,OAAA,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,mBAAmB,CAAC,aAAa,CAAC,CAA5D,EAA4D,EAC7E,WAAW,EAAE,YAAA,EAAM,OAAA,KAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,aAAa,EAAE,MAAM,CAAC,CAAA,EAAA,EACxF,WAAW,EAAE,YAAM,EAAA,OAAA,KAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,aAAa,EAAE,MAAM,CAAC,GAAA,EAAA;4CACxFX,yBAAC,CAAA,aAAA,CAAAY,6CAAsB,QAAE,mBAAmB,CAAC,aAAa,CAAC,KAAK,CAA0B,CAC5E;IAClB,oCAAAZ,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAC,wBAAwB,EAAA,EAClC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,UAAC,OAA0B,EAAA;IAC7C,wCAAA,OAAOA,yBAAC,CAAA,aAAA,CAAAW,+BAAe,EAAC,EAAA,GAAG,EAAE,OAAO,CAAC,GAAG,EACpC,EAAE,EAAE,OAAO,CAAC,GAAG,EACf,QAAQ,EAAE,IAAI,EACd,QAAQ,EAAE,OAAO,CAAC,GAAG,IAAI,KAAI,CAAC,QAAQ,EAAE,EACxC,OAAO,EAAE,KAAI,CAAC,cAAc,IAAI,KAAI,CAAC,cAAc,CAAC,GAAG,IAAI,OAAO,CAAC,GAAG,EACtE,WAAW,EAAE,YAAA,EAAM,OAAA,KAAI,CAAC,WAAW,EAAE,CAAA,EAAA,EACrC,QAAQ,EAAE,YAAM,EAAA,OAAA,KAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAA,EAAA,EAC5C,OAAO,EAAE,UAAA,KAAK,EAAI,EAAA,OAAA,KAAI,CAAC,cAAc,CAAC,KAAK,EAAE,OAAO,CAAC,CAAA,EAAA,EACrD,MAAM,EAAE,UAAA,KAAK,EAAI,EAAA,OAAA,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,OAAO,CAAC,CAAA,EAAA,EACnD,WAAW,EAAE,YAAM,EAAA,OAAA,KAAI,CAAC,qBAAqB,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA,EAAA,EAC9D,WAAW,EAAE,YAAM,EAAA,OAAA,KAAI,CAAC,qBAAqB,CAAC,OAAO,EAAE,MAAM,CAAC,GAAA,EAAA;IAC9D,4CAAAX,yBAAA,CAAA,aAAA,CAACY,6CAAsB,EAClB,IAAA,EAAA,KAAI,CAAC,KAAK,CAAC,wBAAwB;sDAC9B,KAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,OAAO,CAAC;IAC9C,kDAAE,OAAO,CAAC,KAAK,CACE,CACX,CAAC;yCACtB,CAAC,CACA,CACE,CACO,CACrB,CACmB,EAAI,CAAA,CAC3B,CAChB,EACR;SACL,CAAA;IAES,IAAA,mBAAA,CAAA,SAAA,CAAA,iBAAiB,GAA3B,YAAA;IACI,QAAA,OAAO,IAAI,CAAC;SACf,CAAA;IA7We,IAAA,mBAAA,CAAA,aAAa,GAA8B,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAEd,mBAAS,CAAC,yBAAyB,EAAE,CAAC;QA8WzH,OAAC,mBAAA,CAAA;KAAA,CAlYwCe,2CAAqB,CAkY7D,CAAA;;ICzZD;;IAEG;IACH,IAAA,qBAAA,kBAAA,UAAA,MAAA,EAAA;QAA2CtB,eAA+B,CAAA,qBAAA,EAAA,MAAA,CAAA,CAAA;IAA1E,IAAA,SAAA,qBAAA,GAAA;YAAA,IAyBC,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA,CAAA;;YAvBM,KAAgB,CAAA,gBAAA,GAAY,iBAAiB,CAAC;;YAG7C,KAAK,CAAA,KAAA,GAAwB,EAAE,CAAC;;YAGhC,KAAW,CAAA,WAAA,GAAa,IAAI,CAAC;;YAG7B,KAAiB,CAAA,iBAAA,GAAa,KAAK,CAAC;YAapC,KAAQ,CAAA,QAAA,GAA4FuB,OAAG,CAAC;;SAC/G;IAvBM,IAAAC,gBAAA,CAAA;YAAFC,UAAC;IAA+C,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,kBAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAG7C,IAAAD,gBAAA,CAAA;YAAHE,YAAE;IAAiC,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAGhC,IAAAF,gBAAA,CAAA;YAAHE,YAAE;IAA8B,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,aAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAG7B,IAAAF,gBAAA,CAAA;YAAHE,YAAE;IAAqC,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,mBAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAG9B,IAAAF,gBAAA,CAAA;YAATG,cAAQ;IAA6C,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,YAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAE5C,IAAAH,gBAAA,CAAA;YAATG,cAAQ;IAAuC,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAEtC,IAAAH,gBAAA,CAAA;YAATG,cAAQ;IAA4C,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAE3C,IAAAH,gBAAA,CAAA;YAATG,cAAQ;IAAsC,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAE3C,IAAAH,gBAAA,CAAA;YAAHE,YAAE;IAAwE,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,0BAAA,EAAA,KAAA,CAAA,CAAA,CAAA;IAEvE,IAAAF,gBAAA,CAAA;YAAHE,YAAE;IAAyG,KAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;QAChH,OAAC,qBAAA,CAAA;KAAA,CAzB0CE,yCAAuB,CAyBjE,CAAA,CAAA;IAED;;IAEG;IACH,IAAA,eAAA,kBAAA,UAAA,MAAA,EAAA;QAAqC5B,eAAsE,CAAA,eAAA,EAAA,MAAA,CAAA,CAAA;IAA3G,IAAA,SAAA,eAAA,GAAA;;SAsEC;IArEa,IAAA,eAAA,CAAA,SAAA,CAAA,YAAY,GAAtB,YAAA;YACI,OAAO,IAAI,qBAAqB,EAAE,CAAC;SACtC,CAAA;IAKD,IAAA,MAAA,CAAA,cAAA,CAAW,eAAS,CAAA,SAAA,EAAA,WAAA,EAAA;;IAApB,QAAA,GAAA,EAAA,YAAA;gBAAA,IAEC,KAAA,GAAA,IAAA,CAAA;;gBADG,OAAO,CAAA,EAAA,GAAA,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,UAAA,CAAC,EAAI,EAAA,OAAA,CAAC,CAAC,GAAG,IAAI,KAAI,CAAC,KAAK,GAAA,CAAC,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,SAAS,CAAC;aACrE;IACD,QAAA,GAAA,EAAA,UAAqB,IAAY,EAAA;;gBAC7B,IAAI,CAAC,KAAK,GAAA,CAAA,EAAA,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,UAAA,CAAC,EAAI,EAAA,OAAA,CAAC,CAAC,SAAS,IAAI,IAAI,CAAA,EAAA,CAAC,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,GAAG,CAAC;aACrE;;;IAHA,KAAA,CAAA,CAAA;IAKS,IAAA,eAAA,CAAA,SAAA,CAAA,WAAW,GAArB,YAAA;IACI,QAAA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;SAC9B,CAAA;IAGD,IAAA,MAAA,CAAA,cAAA,CAAY,eAAW,CAAA,SAAA,EAAA,aAAA,EAAA;IAAvB,QAAA,GAAA,EAAA,UAAwB,GAAsE,EAAA;gBAC1F,IAAI,OAAO,GAAG,GAAkD,CAAC;IACjE,YAAA,IAAI,OAAO,IAAI,OAAO,CAAC,KAAK,EAAE;oBAC1B,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC;IAC1C,gBAAA,IAAI,CAAC,KAAK,CAAC,iBAAiB,GAAG,OAAO,IAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,iBAAiB,CAAC;IAC9F,aAAA;IAAM,iBAAA;IACH,gBAAA,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,OAAc,CAAC;IACrC,aAAA;aACJ;;;IAAA,KAAA,CAAA,CAAA;IAGD,IAAA,MAAA,CAAA,cAAA,CAAY,eAAW,CAAA,SAAA,EAAA,aAAA,EAAA;IAAvB,QAAA,GAAA,EAAA,YAAA;IACI,YAAA,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;aAC3B;;;IAAA,KAAA,CAAA,CAAA;IAGD,IAAA,MAAA,CAAA,cAAA,CAAY,eAAU,CAAA,SAAA,EAAA,YAAA,EAAA;IAAtB,QAAA,GAAA,EAAA,UAAuB,OAA+B,EAAA;IAClD,YAAA,IAAI,OAAO,EAAE;oBACT,IAAI,CAAC,KAAK,GAAG,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC;IACzC,aAAA;IACD,YAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG6B,qCAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;IAC1E,YAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;IAC7B,YAAAC,iDAAwB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAuB,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;aACpH;;;IAAA,KAAA,CAAA,CAAA;IAGD,IAAA,MAAA,CAAA,cAAA,CAAY,eAAU,CAAA,SAAA,EAAA,YAAA,EAAA;IAAtB,QAAA,GAAA,EAAA,UAAuB,UAAkB,EAAA;IACrC,YAAA,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC;gBAChC,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;oBACnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;IACnC,aAAA;aACJ;;;IAAA,KAAA,CAAA,CAAA;IAES,IAAA,eAAA,CAAA,SAAA,CAAA,WAAW,GAArB,YAAA;IACI,QAAAC,+CAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAuB,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IAC5G,QAAA,OAAO,CAACC,iCAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,IAAI,EAAE,cAAM,OAAAC,UAAE,CAAC,qBAAqB,CAAC,CAAC,SAAS,GAAA,CAAC,CAAC,CAAC;SACvJ,CAAA;IAES,IAAA,eAAA,CAAA,SAAA,CAAA,UAAU,GAApB,YAAA;IACI,QAAA,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;SAC7B,CAAA;IAEK,IAAA,eAAA,CAAA,SAAA,CAAA,OAAO,GAAb,YAAA;;;IACI,gBAAAH,iDAAwB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAuB,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;;;;IACjH,KAAA,CAAA;;IAGS,IAAA,eAAA,CAAA,SAAA,CAAA,UAAU,GAApB,YAAA;YACI,OAAO,IAAI,mBAAmB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;SAC1D,CAAA;QAhEM,eAAe,CAAA,eAAA,GAAG,iBAAiB,CAAC;IAe3C,IAAAN,gBAAA,CAAA;YADCU,eAAO,CAAC,UAAU,CAAC;IASnB,KAAA,EAAA,eAAA,CAAA,SAAA,EAAA,aAAA,EAAA,IAAA,CAAA,CAAA;IAGD,IAAAV,gBAAA,CAAA;YADCU,eAAO,CAAC,UAAU,CAAC;IAGnB,KAAA,EAAA,eAAA,CAAA,SAAA,EAAA,aAAA,EAAA,IAAA,CAAA,CAAA;IAGD,IAAAV,gBAAA,CAAA;YADCU,eAAO,CAAC,SAAS,CAAC;IAQlB,KAAA,EAAA,eAAA,CAAA,SAAA,EAAA,YAAA,EAAA,IAAA,CAAA,CAAA;IAGD,IAAAV,gBAAA,CAAA;YADCU,eAAO,CAAC,gBAAgB,CAAC;IAMzB,KAAA,EAAA,eAAA,CAAA,SAAA,EAAA,YAAA,EAAA,IAAA,CAAA,CAAA;QAmBL,OAAC,eAAA,CAAA;KAAA,CAtEoCC,mCAAiB,CAsErD,CAAA;;IClHD;;;;IAIG;AACHC,qCAAgB,CAAC,iBAAiB,CAAC;IAC/B,IAAA,IAAI,EAAE,iCAAiC;IACvC,IAAA,OAAO,EAAE,UAAU;;IAGnB,IAAA,cAAc,EAAE;IACZ,QAAAC,eAAO,CAAC,WAAW,CAAC,0BAA0B,EAAE,UAAC,QAAyB,EAAA,EAAK,OAAA,IAAI,yBAAyB,CAAC,QAAQ,CAAC,CAAA,EAAA,CAAC;IAC1H,KAAA;IAED,IAAA,QAAQ,EAAE;IACN,QAAA,EAAE,eAAe,EAAE,iBAAiB,EAAE,WAAW,EAAE,eAAe,EAAS;IACrD,KAAA;IAEf,CAAA,CAAC;;;;;;"}